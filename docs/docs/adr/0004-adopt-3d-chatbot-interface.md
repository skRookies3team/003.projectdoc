# [ADR-0003] 페르소나 챗봇을 위한 3D 인터랙티브 인터페이스 도입

* **상태**: 제안됨 (Proposed) [2025-12-05]
* **결정자**: 신재석, 양승준
* **관련 이슈**: #88 (챗봇 UI 고도화), #92 (3D 모델링 통합)

## 1. 배경 및 문제 (Context)
현재 PetLog의 '페르소나 챗봇' 기능은 카카오톡 스타일의 **2D 텍스트 기반 UI**로 구현되어 있습니다.
이는 정보 전달에는 효율적이지만, 기획 의도인 **"내 반려동물이 살아있는 것처럼 말을 건다"**는 감성적 가치와 몰입감을 전달하기에는 한계가 있습니다.

경쟁 앱들과의 확실한 차별화(Killer Content)를 위해, 사용자가 자신의 반려동물과 마주 보고 대화하는 듯한 **실감형 인터페이스**가 필요합니다.

## 2. 결정 사항 (Decision)
우리는 챗봇 인터페이스를 **Web 3D 기술(Three.js)**을 활용한 **"3D 캐릭터 대화형 UI"**로 전면 개편하기로 결정했습니다.

* **주요 변경점:**
    * 기존 2D 리스트 형태의 채팅창을 **3D Canvas**로 대체합니다.
    * 사용자 화면 중앙에 **3D 강아지 모델**을 배치합니다.
    * 챗봇의 응답을 캐릭터의 **애니메이션(반응)**과 **3D 공간상의 말풍선(Floating UI)**으로 시각화합니다.

## 3. 결정 근거 (Decision Drivers)
* **사용자 몰입도(Engagement) 극대화**: 정적인 텍스트보다 움직이는 3D 캐릭터가 사용자에게 더 강한 정서적 유대감을 제공합니다.
* **기술적 실현 가능성**: `React Three Fiber` 라이브러리를 통해, 기존 React 컴포넌트 구조를 유지하면서 웹상에서 3D를 효율적으로 렌더링할 수 있습니다.
* **확장성**: 향후 도입 예정인 '내 펫 3D 모델 생성 AI' 기능이 구현되었을 때, 별도의 뷰어 개발 없이 즉시 적용 가능한 기반을 마련할 수 있습니다.

## 4. 고려했던 대안들 (Considered Options)

### 1) 2D Live2D / Spine 애니메이션
* **설명**: 2D 이미지를 움직이는 것처럼 보이게 하는 기술.
* **장점**: 가볍고 모바일 성능 부담이 적음.
* **단점**: 3D 공간감이 부족하고, 향후 '메타버스 산책' 등의 기능으로 확장하기 어려움. (기각)

### 2) Unity WebGL 빌드 임베딩
* **설명**: 유니티 엔진으로 만든 게임을 웹페이지에 삽입.
* **장점**: 강력한 그래픽과 물리 엔진 사용 가능.
* **단점**: 초기 로딩 용량(WASM)이 너무 크고, React 상태(State)와의 양방향 통신이 복잡함. (기각)

### 3) React Three Fiber (R3F) - [채택됨]
* **설명**: Three.js를 React 컴포넌트 방식으로 래핑한 라이브러리.
* **장점**: React 생태계와 완벽하게 통합되며, 가볍고 선언적인 코드로 3D 씬 구성 가능.

## 5. 장단점 분석 (Pros and Cons)

### [React Three Fiber (3D)]
* **장점**:
    * **웹 네이티브**: 별도의 플러그인 없이 브라우저에서 바로 구동됨.
    * **상호작용**: 마우스/터치로 펫을 회전시키거나 쓰다듬는 인터랙션 구현이 용이함.
    * **자산 활용**: 표준 3D 포맷(`.glb`, `.gltf`)을 지원하여 외부 AI 생성 모델(Meshy, Tripo)과 호환성이 높음.
* **단점**:
    * **성능 이슈**: 저사양 모바일 기기에서 배터리 소모 및 발열 가능성 있음. (최적화 필수)
    * **자산 확보**: 고품질의 3D 모델과 애니메이션 파일을 확보하거나 제작해야 함.

## 6. 상세 구현 전략 (Implementation Details)
* **라이브러리 스택**: `three.js`, `@react-three/fiber` (Core), `@react-three/drei` (Helpers), `framer-motion` (UI Animation).
* **모델링 규격**: 모바일 최적화를 위해 **Low-poly(저폴리곤)** 스타일의 **`.glb` (압축 바이너리)** 포맷 사용.
* **애니메이션 로직**:
    * 평소: `Idle` (숨쉬기, 두리번거리기)
    * 대화 수신 시: `Jump` (반가움) 또는 `Bark` (짖기) 애니메이션 트리거.
* **배경 처리**: 렌더링 부하를 줄이기 위해 복잡한 3D 배경 대신 **HDRI 환경맵** 또는 **2.5D 이미지 배경** 사용.

## 7. 결과 및 영향 (Consequences)
* **프론트엔드 작업**: `Canvas` 컴포넌트 도입 및 3D 렌더링 로직(`PetModel.tsx`) 추가 개발이 필요합니다.
* **리소스 관리**: `public/models/` 경로에 3D 에셋 관리 정책이 필요하며, 초기 로딩 시 `useGLTF.preload`를 통한 에셋 프리로딩 전략을 수립해야 합니다.
* **사용자 경험**: 채팅 입력 시 펫이 반응하는 시각적 피드백이 추가되어 UX 만족도가 상승할 것으로 예상됩니다.
